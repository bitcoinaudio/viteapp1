<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>The Ides of March</title>
  <script>
    async function checkCORS() {
      const id = window.location.pathname.split("/")[2];
      let corsSuccess = null;

      {
        fetch(`/content/${id}`)
          .then(response => {
            corsSuccess = response.ok;
            console.log(corsSuccess ? "CORS success" : "CORS failure");
            window.dispatchEvent(new CustomEvent('corsCheckComplete', { detail: corsSuccess }));
          })
          .catch(error => {
            corsSuccess = false;
            console.log("CORS failure (error)", error);
            window.dispatchEvent(new CustomEvent('corsCheckComplete', { detail: corsSuccess }));
          });
      }

      if (corsSuccess !== null) {
        console.log("CORS success from index.html", corsSuccess)
        window.dispatchEvent(new CustomEvent('corsCheckComplete', { detail: corsSuccess }));
      }
    }

    document.addEventListener('DOMContentLoaded', checkCORS);
  </script>
</head>
<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
 
</body>

</html>