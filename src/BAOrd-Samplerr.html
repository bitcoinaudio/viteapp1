<!DOCTYPE html>
<html lang="en">

<head>
    <title>this palette</title>
</head>

<body>
    <button onclick="playOrdAudio()">playsound</button>
    <div id="colorpads" style="height: 400px; width: 400px;"></div>
    <style>
        canvas {
            padding-bottom: 0px;
        }
    </style>
    <script>
        var ht = 50;
        var wt = 50;
        var color_start = 0;
        var color_end = color_start + 6;
        var start = 0;
        var end = start + 2;
        var url = window.location.pathname;
        var urlarray = url.split("/")
        //var ins_id = urlarray[urlarray.length - 1];
        var ins_id = "cb15806090ccdcac109abb3da5461d6ba5ea924b73d811422613b7b335453d3ei0"
        var color = "";
        var audio = "";


        for (let i = 0; i < ins_id.length - 2; i++) {
            var w = document.getElementById("colorpads");
            var canvas = document.createElement("canvas");          
            var ctx = canvas.getContext("2d");

            color = ins_id.slice(color_start, color_end);

            canvas.id = color;
            canvas.width = wt;
            canvas.height = ht;
            
            ctx.fillStyle = "#" + color;
            ctx.fillRect(0, 0, wt, ht);
            ctx.strokeRect(0, 0, wt, ht)
            canvas.innerHTML = color;

            canvas.addEventListener('mouseover', playColor);
            w.appendChild(canvas);

            color_start++;
            color_end++;

        }
        function playOrdAudio() {

            const player = new Tone.Player("https://ordinals.com/content/069f79685c04af6357058eeeb65c4835ed13d00b5bf5a69c4cff5e513d9b0fffi0").toDestination();
            Tone.loaded().then(() => {
            player.start();
            });

        }

        function playColor() {
            
            var vol = new Tone.Volume(-24).toDestination();
            var synth = new Tone.Synth().toDestination();
            synth.connect(vol);
            s = this.id
            audio = s.slice(0, 2)
            console.log(s + ":" + audio)
            try {

                synth.triggerAttackRelease(audio, "4n");


            }
            catch (err) {
                this.height = 0;
                this.weight = 0;
                synth.dispose();
            }

        }

        var sound_start = 0;
        var sound_end = sound_start + 2;
        function playSound() {
            
            var sound = ins_id.slice(sound_start, sound_end);
            sound = parseInt(sound, 10)
            var synth = new Tone.Synth().toDestination();
            // console.log(sound)

            for (let i = 0; i < ins_id.length - 2; i++) {
                synth.triggerAttackRelease(sound.value, "8n");
                // console.log(synth);
                console.log(sound);

            }
            sound_start++;
            sound_end++;
            Tone.Transport.scheduleRepeat(playSound, 80);

        }

        

    </script>
    <!-- Tonejs -->
    <script type="text/javascript"
        src="https://ordinals.com/content/44740a1f30efb247ef41de3355133e12d6f58ab4dc8a3146648e2249fa9c6a39i0"></script>

</body>

</html>